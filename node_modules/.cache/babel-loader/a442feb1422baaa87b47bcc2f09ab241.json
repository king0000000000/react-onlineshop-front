{"ast":null,"code":"import'./index.css';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';//Components\nimport CartItem from'../../components/CartItem';//Actions\nimport{addToCart,removeFromCart}from'../../redux/actions/cartActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CartScreen=function CartScreen(){var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;var qtyChangeHandler=function qtyChangeHandler(id,qty){dispatch(addToCart(id,qty));};var removeHandler=function removeHandler(id){dispatch(removeFromCart(id));};var getCartCount=function getCartCount(){return cartItems.reduce(function(qty,item){return Number(item.qty)+qty;},0);};var getCartSubTotal=function getCartSubTotal(){return cartItems.reduce(function(price,item){return item.price*item.qty+price;},0);};return/*#__PURE__*/_jsxs(\"div\",{className:\"cartscreen\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cartscreen_left\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Shopping Cart\"}),cartItems.length===0?/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u4F60\\u7684\\u8CFC\\u7269\\u8ECA\\u662F\\u7A7A\\u7684\\uFF0C\",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"\\u56DE\\u9996\\u9801\"})]}):cartItems.map(function(item){return/*#__PURE__*/_jsx(CartItem,{item:item,qtyChangeHandler:qtyChangeHandler,removeHandler:removeHandler},item.product);})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cartscreen_right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cartscreen_info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u7E3D\\u5171(\",getCartCount(),\")\\u6A23\\u7269\\u54C1\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"$\",getCartSubTotal(),\" NT\"]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{children:\"\\u78BA\\u8A8D\\u7D50\\u5E33\"})})]})]});};export default CartScreen;","map":{"version":3,"sources":["F:/VS code/frontend/src/screens/CartScreen/index.tsx"],"names":["useDispatch","useSelector","Link","CartItem","addToCart","removeFromCart","CartScreen","dispatch","cart","state","cartItems","qtyChangeHandler","id","qty","removeHandler","getCartCount","reduce","item","Number","getCartSubTotal","price","length","map","product"],"mappings":"AAAA,MAAO,aAAP,CACA,OAASA,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,IAAT,KAAqB,kBAArB,CAGA;AACA,MAAOC,CAAAA,QAAP,KAAqB,2BAArB,CAEA;AACA,OAASC,SAAT,CAAoBC,cAApB,KAA0C,iCAA1C,C,wFAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACrB,GAAMC,CAAAA,QAAQ,CAAGP,WAAW,EAA5B,CAEA,GAAMQ,CAAAA,IAAI,CAAGP,WAAW,CAAC,SAACQ,KAAD,QAAqBA,CAAAA,KAAK,CAACD,IAA3B,EAAD,CAAxB,CACA,GAAQE,CAAAA,SAAR,CAAsBF,IAAtB,CAAQE,SAAR,CAEA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,EAAD,CAAWC,GAAX,CAA0B,CAC/CN,QAAQ,CAACH,SAAS,CAACQ,EAAD,CAAIC,GAAJ,CAAV,CAAR,CACH,CAFD,CAIA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACF,EAAD,CAAe,CACjCL,QAAQ,CAACF,cAAc,CAACO,EAAD,CAAf,CAAR,CACH,CAFD,CAIA,GAAMG,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACvB,MAAOL,CAAAA,SAAS,CAACM,MAAV,CAAiB,SAACH,GAAD,CAAMI,IAAN,QAAeC,CAAAA,MAAM,CAACD,IAAI,CAACJ,GAAN,CAAN,CAAmBA,GAAlC,EAAjB,CAAwD,CAAxD,CAAP,CACH,CAFD,CAIA,GAAMM,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC1B,MAAOT,CAAAA,SAAS,CAACM,MAAV,CAAiB,SAACI,KAAD,CAAOH,IAAP,QAAgBA,CAAAA,IAAI,CAACG,KAAL,CAAaH,IAAI,CAACJ,GAAlB,CAAwBO,KAAxC,EAAjB,CAAgE,CAAhE,CAAP,CACH,CAFD,CAIA,mBACI,aAAK,SAAS,CAAC,YAAf,wBACI,aAAK,SAAS,CAAC,iBAAf,wBACI,qCADJ,CAGQV,SAAS,CAACW,MAAV,GAAqB,CAArB,cACI,6FACa,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,gCADb,GADJ,CAIIX,SAAS,CAACY,GAAV,CAAc,SAACL,IAAD,qBACd,KAAC,QAAD,EACI,IAAI,CAAEA,IADV,CAEI,gBAAgB,CAAEN,gBAFtB,CAGI,aAAa,CAAEG,aAHnB,EAISG,IAAI,CAACM,OAJd,CADc,EAAd,CAPZ,GADJ,cAkBI,aAAK,SAAS,CAAC,kBAAf,wBACI,aAAK,SAAS,CAAC,iBAAf,wBACI,qCAAOR,YAAY,EAAnB,yBADJ,cAEI,yBAAKI,eAAe,EAApB,SAFJ,GADJ,cAKI,kCACI,oDADJ,EALJ,GAlBJ,GADJ,CA8BH,CApDD,CAsDA,cAAeb,CAAAA,UAAf","sourcesContent":["import './index.css'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport { RootState } from '../../redux/store'\r\n\r\n//Components\r\nimport CartItem from '../../components/CartItem'\r\n\r\n//Actions\r\nimport { addToCart, removeFromCart } from '../../redux/actions/cartActions'\r\n\r\nconst CartScreen = () => {\r\n    const dispatch = useDispatch()\r\n\r\n    const cart = useSelector((state:RootState) => state.cart)\r\n    const { cartItems } = cart\r\n\r\n    const qtyChangeHandler = (id:string,qty:number) => {\r\n        dispatch(addToCart(id,qty))\r\n    }\r\n\r\n    const removeHandler = (id:string) => {\r\n        dispatch(removeFromCart(id))\r\n    }\r\n\r\n    const getCartCount = () => {\r\n        return cartItems.reduce((qty, item) => Number(item.qty) + qty, 0)\r\n    }\r\n\r\n    const getCartSubTotal = () => {\r\n        return cartItems.reduce((price,item) => item.price * item.qty + price, 0)\r\n    }\r\n\r\n    return (\r\n        <div className=\"cartscreen\">\r\n            <div className=\"cartscreen_left\">\r\n                <h2>Shopping Cart</h2>\r\n                {\r\n                    cartItems.length === 0 ? (\r\n                        <div>\r\n                            你的購物車是空的，<Link to=\"/\">回首頁</Link>\r\n                        </div>\r\n                    ) : cartItems.map((item:any) => ( \r\n                        <CartItem \r\n                            item={item} \r\n                            qtyChangeHandler={qtyChangeHandler} \r\n                            removeHandler={removeHandler} \r\n                            key={item.product}\r\n                        />\r\n                    ))\r\n                }\r\n            </div>\r\n            <div className=\"cartscreen_right\">\r\n                <div className=\"cartscreen_info\">\r\n                    <p>總共({getCartCount()})樣物品</p>\r\n                    <p>${getCartSubTotal()} NT</p>\r\n                </div>\r\n                <div>\r\n                    <button>確認結帳</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CartScreen\r\n"]},"metadata":{},"sourceType":"module"}