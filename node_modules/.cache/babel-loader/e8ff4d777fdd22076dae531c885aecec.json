{"ast":null,"code":"import _toConsumableArray from\"F:/VS code/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"F:/VS code/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./index.css';import{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';// Actions\nimport{getProductDetails}from'../../redux/actions/productActions';import{addToCart}from'../../redux/actions/cartActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ProductScreen=function ProductScreen(_ref){var match=_ref.match,history=_ref.history;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),qty=_useState2[0],setQty=_useState2[1];var dispatch=useDispatch();var productDetails=useSelector(function(state){return state.getProductDetails;});var loading=productDetails.loading,error=productDetails.error,product=productDetails.product;useEffect(function(){if(product&&match.params.id!==product._id){dispatch(getProductDetails(match.params.id));}},[dispatch,product,match]);var addToCartHandler=function addToCartHandler(){dispatch(addToCart(product._id,qty));history.push(\"/cart\");};return/*#__PURE__*/_jsx(\"div\",{className:\"productscreen\",children:loading?/*#__PURE__*/_jsx(\"h2\",{children:\"Loading...\"}):error?/*#__PURE__*/_jsx(\"h2\",{children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"productscreen_left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"left_image\",children:/*#__PURE__*/_jsx(\"img\",{src:product.imageUrl,alt:product.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"left_info\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"left_name\",children:product.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u50F9\\u683C\\uFF1A$\",product.price,\" NT\"]}),/*#__PURE__*/_jsx(\"p\",{children:product.description})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"productscreen_right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"right_info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u50F9\\u683C\\uFF1A \",/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",product.price,\" NT\"]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u72C0\\u614B\\uFF1A\",\" \",/*#__PURE__*/_jsx(\"span\",{children:product.countInStock>0?\"有現貨\":\"已售完\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u6578\\u91CF\",/*#__PURE__*/_jsx(\"select\",{value:qty,onChange:function onChange(e){return setQty(parseInt(e.target.value));},children:_toConsumableArray(Array(product.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})]}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:addToCartHandler,children:\"Add To Cart\"})})]})})]})});};export default ProductScreen;","map":{"version":3,"sources":["F:/VS code/frontend/src/screens/ProductScreen/index.tsx"],"names":["useState","useEffect","useDispatch","useSelector","getProductDetails","addToCart","ProductScreen","match","history","qty","setQty","dispatch","productDetails","state","loading","error","product","params","id","_id","addToCartHandler","push","imageUrl","name","price","description","countInStock","e","parseInt","target","value","Array","keys","map","x"],"mappings":"4RAAA,MAAO,aAAP,CACA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CAGA;AACA,OAASC,iBAAT,KAAkC,oCAAlC,CACA,OAASC,SAAT,KAA0B,iCAA1B,C,6IAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,MAAsD,IAAnDC,CAAAA,KAAmD,MAAnDA,KAAmD,CAA5CC,OAA4C,MAA5CA,OAA4C,CACxE,cAAsBR,QAAQ,CAAC,CAAD,CAA9B,wCAAOS,GAAP,eAAYC,MAAZ,eACA,GAAMC,CAAAA,QAAQ,CAAGT,WAAW,EAA5B,CAEA,GAAMU,CAAAA,cAAc,CAAGT,WAAW,CAAC,SAACU,KAAD,QAAsBA,CAAAA,KAAK,CAACT,iBAA5B,EAAD,CAAlC,CACA,GAAQU,CAAAA,OAAR,CAAgFF,cAAhF,CAAQE,OAAR,CAAiBC,KAAjB,CAAgFH,cAAhF,CAAiBG,KAAjB,CAAwBC,OAAxB,CAAgFJ,cAAhF,CAAwBI,OAAxB,CAEAf,SAAS,CAAC,UAAM,CACZ,GAAIe,OAAO,EAAIT,KAAK,CAACU,MAAN,CAAaC,EAAb,GAAoBF,OAAO,CAACG,GAA3C,CAAgD,CAC5CR,QAAQ,CAACP,iBAAiB,CAACG,KAAK,CAACU,MAAN,CAAaC,EAAd,CAAlB,CAAR,CACH,CACJ,CAJQ,CAIN,CAACP,QAAD,CAAWK,OAAX,CAAoBT,KAApB,CAJM,CAAT,CAMA,GAAMa,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC3BT,QAAQ,CAACN,SAAS,CAACW,OAAO,CAACG,GAAT,CAAcV,GAAd,CAAV,CAAR,CACAD,OAAO,CAACa,IAAR,CAAa,OAAb,EACH,CAHD,CAKA,mBACI,YAAK,SAAS,CAAC,eAAf,UACKP,OAAO,cACJ,kCADI,CAEJC,KAAK,cACL,oBAAKA,KAAL,EADK,cAGL,wCACI,aAAK,SAAS,CAAC,oBAAf,wBACI,YAAK,SAAS,CAAC,YAAf,uBACI,YAAK,GAAG,CAAEC,OAAO,CAACM,QAAlB,CAA4B,GAAG,CAAEN,OAAO,CAACO,IAAzC,EADJ,EADJ,cAKI,aAAK,SAAS,CAAC,WAAf,wBACI,UAAG,SAAS,CAAC,WAAb,UAA0BP,OAAO,CAACO,IAAlC,EADJ,cAEI,2CAAQP,OAAO,CAACQ,KAAhB,SAFJ,cAGI,mBAAIR,OAAO,CAACS,WAAZ,EAHJ,GALJ,GADJ,cAYI,YAAK,SAAS,CAAC,qBAAf,uBACI,aAAK,SAAS,CAAC,YAAf,wBACI,wDACQ,4BAAQT,OAAO,CAACQ,KAAhB,SADR,GADJ,cAII,0CACQ,GADR,cAEI,sBACKR,OAAO,CAACU,YAAR,CAAuB,CAAvB,CAA2B,KAA3B,CAAmC,KADxC,EAFJ,GAJJ,cAUI,iDAEI,eAAQ,KAAK,CAAEjB,GAAf,CAAoB,QAAQ,CAAE,kBAACkB,CAAD,QAAOjB,CAAAA,MAAM,CAACkB,QAAQ,CAACD,CAAC,CAACE,MAAF,CAASC,KAAV,CAAT,CAAb,EAA9B,UACK,mBAAIC,KAAK,CAACf,OAAO,CAACU,YAAT,CAAL,CAA4BM,IAA5B,EAAJ,EAAwCC,GAAxC,CAA4C,SAACC,CAAD,qBACzC,eAAoB,KAAK,CAAEA,CAAC,CAAG,CAA/B,UACKA,CAAC,CAAG,CADT,EAAaA,CAAC,CAAG,CAAjB,CADyC,EAA5C,CADL,EAFJ,GAVJ,cAoBI,gCACI,eAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAEd,gBAA/B,yBADJ,EApBJ,GADJ,EAZJ,GANR,EADJ,CAoDH,CAtED,CAwEA,cAAed,CAAAA,aAAf","sourcesContent":["import './index.css'\r\nimport { useState, useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { RootState } from '../../redux/store'\r\n\r\n// Actions\r\nimport { getProductDetails } from '../../redux/actions/productActions'\r\nimport { addToCart } from '../../redux/actions/cartActions'\r\n\r\nconst ProductScreen = ({ match, history }: { match: any, history: any }) => {\r\n    const [qty, setQty] = useState(1)\r\n    const dispatch = useDispatch()\r\n\r\n    const productDetails = useSelector((state: RootState) => state.getProductDetails)\r\n    const { loading, error, product }: { loading: any, error: any, product: any } = productDetails\r\n\r\n    useEffect(() => {\r\n        if (product && match.params.id !== product._id) {\r\n            dispatch(getProductDetails(match.params.id))\r\n        }\r\n    }, [dispatch, product, match])\r\n\r\n    const addToCartHandler = () => {\r\n        dispatch(addToCart(product._id, qty))\r\n        history.push(\"/cart\")\r\n    }\r\n\r\n    return (\r\n        <div className=\"productscreen\">\r\n            {loading ? (\r\n                <h2>Loading...</h2>\r\n            ) : error ? (\r\n                <h2>{error}</h2>\r\n            ) : (\r\n                <>\r\n                    <div className=\"productscreen_left\">\r\n                        <div className=\"left_image\">\r\n                            <img src={product.imageUrl} alt={product.name} />\r\n                        </div>\r\n\r\n                        <div className=\"left_info\">\r\n                            <p className=\"left_name\">{product.name}</p>\r\n                            <p>價格：${product.price} NT</p>\r\n                            <p>{product.description}</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"productscreen_right\">\r\n                        <div className=\"right_info\">\r\n                            <p>\r\n                                價格： <span>${product.price} NT</span>\r\n                            </p>\r\n                            <p>\r\n                                狀態：{\" \"}\r\n                                <span>\r\n                                    {product.countInStock > 0 ? \"有現貨\" : \"已售完\"}\r\n                                </span>\r\n                            </p>\r\n                            <p>\r\n                                數量\r\n                                <select value={qty} onChange={(e) => setQty(parseInt(e.target.value))}>\r\n                                    {[...Array(product.countInStock).keys()].map((x) => (\r\n                                        <option key={x + 1} value={x + 1}>\r\n                                            {x + 1}\r\n                                        </option>\r\n                                    ))}\r\n                                </select>\r\n                            </p>\r\n                            <p>\r\n                                <button type=\"button\" onClick={addToCartHandler}>Add To Cart</button>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </>\r\n            )\r\n\r\n            }\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProductScreen\r\n"]},"metadata":{},"sourceType":"module"}